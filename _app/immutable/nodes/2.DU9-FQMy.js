import{a as vt,b as X,p as $t}from"../chunks/firestore.DSZrmMoW.js";import{s as N,z as ht,n as w,b as tt,o as Y,r as et,j as bt}from"../chunks/scheduler.9YoBh8nY.js";import{S as O,i as B,e as v,s as T,f as q,c as $,h as I,k as M,j as G,d as g,n as b,b as C,l as m,r as z,m as F,v as pt,o as mt,a as P,p as gt,t as x,q as J,g as D,w as j,x as A,y as H,z as U,B as ot,C as rt,u as kt}from"../chunks/index.CHXS9Zgj.js";/* empty css                       */import{a as Z,f as wt,l as _t,d as yt,g as Ct,h as Lt}from"../chunks/taglist.B5GXFwBt.js";import{g as It}from"../chunks/entry.DDhd_IFt.js";/* empty css                     */import{o as Et,s as Tt,h as Mt}from"../chunks/index-68602d24.C7jdpTDK.js";const xt=async()=>({locations:await vt()}),$e=Object.freeze(Object.defineProperty({__proto__:null,load:xt},Symbol.toStringTag,{value:"Module"}));function at(r,t,e){const n=r.slice();return n[2]=t[e][0],n[3]=t[e][1],n}function it(r){let t,e=ct(r[2])+"",n,s;return{c(){t=v("li"),n=q(e),s=T(),this.h()},l(a){t=$(a,"LI",{class:!0});var l=I(t);n=G(l,e),s=M(l),l.forEach(g),this.h()},h(){b(t,"class","unfilled_tag")},m(a,l){C(a,t,l),m(t,n),m(t,s)},p(a,l){l&1&&e!==(e=ct(a[2])+"")&&F(n,e)},d(a){a&&g(t)}}}function St(r){let t,e,n,s,a,l,i=r[0].name+"",o,c,u,f,d,h,p=r[0].stars+"",_,E,V,nt,R=Z(Object.entries(r[0].tags)),L=[];for(let y=0;y<R.length;y+=1)L[y]=it(at(r,R,y));return{c(){t=v("div"),e=v("img"),s=T(),a=v("div"),l=v("h3"),o=q(i),c=T(),u=v("div"),f=v("ul");for(let y=0;y<L.length;y+=1)L[y].c();d=T(),h=v("p"),_=q(p),E=q(" / 5"),this.h()},l(y){t=$(y,"DIV",{class:!0});var S=I(t);e=$(S,"IMG",{src:!0,height:!0,width:!0,alt:!0}),s=M(S),a=$(S,"DIV",{class:!0});var k=I(a);l=$(k,"H3",{});var W=I(l);o=G(W,i),W.forEach(g),c=M(k),u=$(k,"DIV",{});var lt=I(u);f=$(lt,"UL",{class:!0});var st=I(f);for(let Q=0;Q<L.length;Q+=1)L[Q].l(st);st.forEach(g),lt.forEach(g),d=M(k),h=$(k,"P",{});var K=I(h);_=G(K,p),E=G(K," / 5"),K.forEach(g),k.forEach(g),S.forEach(g),this.h()},h(){ht(e.src,n="https://placecats.com/neo/100/100")||b(e,"src",n),b(e,"height","100"),b(e,"width","100"),b(e,"alt","img"),b(f,"class","tags"),b(a,"class","tile-content"),b(t,"class","tile")},m(y,S){C(y,t,S),m(t,e),m(t,s),m(t,a),m(a,l),m(l,o),m(a,c),m(a,u),m(u,f);for(let k=0;k<L.length;k+=1)L[k]&&L[k].m(f,null);m(a,d),m(a,h),m(h,_),m(h,E),V||(nt=z(t,"click",r[1]),V=!0)},p(y,[S]){if(S&1&&i!==(i=y[0].name+"")&&F(o,i),S&1){R=Z(Object.entries(y[0].tags));let k;for(k=0;k<R.length;k+=1){const W=at(y,R,k);L[k]?L[k].p(W,S):(L[k]=it(W),L[k].c(),L[k].m(f,null))}for(;k<L.length;k+=1)L[k].d(1);L.length=R.length}S&1&&p!==(p=y[0].stars+"")&&F(_,p)},i:w,o:w,d(y){y&&g(t),pt(L,y),V=!1,nt()}}}function ct(r){const t=r.split("_");let e="";for(let n of t)e+=n.charAt(0).toUpperCase()+n.slice(1)+" ";return e.slice(0,e.length-1)}function Pt(r,t,e){let{location:n}=t;function s(){It(`/locations?id=${n.id}`)}return r.$$set=a=>{"location"in a&&e(0,n=a.location)},[n,s]}class Dt extends O{constructor(t){super(),B(this,t,Pt,St,N,{location:0})}}function ut(r,t,e){const n=r.slice();return n[8]=t[e],n}function Vt(r){let t,e,n=Z(r[1]),s=[];for(let l=0;l<n.length;l+=1)s[l]=ft(ut(r,n,l));const a=l=>P(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();t=J()},l(l){for(let i=0;i<s.length;i+=1)s[i].l(l);t=J()},m(l,i){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(l,i);C(l,t,i),e=!0},p(l,i){if(i&2){n=Z(l[1]);let o;for(o=0;o<n.length;o+=1){const c=ut(l,n,o);s[o]?(s[o].p(c,i),x(s[o],1)):(s[o]=ft(c),s[o].c(),x(s[o],1),s[o].m(t.parentNode,t))}for(mt(),o=n.length;o<s.length;o+=1)a(o);gt()}},i(l){if(!e){for(let i=0;i<n.length;i+=1)x(s[i]);e=!0}},o(l){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)P(s[i]);e=!1},d(l){l&&g(t),pt(s,l)}}}function zt(r){let t,e="No locations found.";return{c(){t=v("p"),t.textContent=e},l(n){t=$(n,"P",{"data-svelte-h":!0}),D(t)!=="svelte-jyefyr"&&(t.textContent=e)},m(n,s){C(n,t,s)},p:w,i:w,o:w,d(n){n&&g(t)}}}function Nt(r){let t,e="Loading...";return{c(){t=v("p"),t.textContent=e},l(n){t=$(n,"P",{"data-svelte-h":!0}),D(t)!=="svelte-qdsr2u"&&(t.textContent=e)},m(n,s){C(n,t,s)},p:w,i:w,o:w,d(n){n&&g(t)}}}function ft(r){let t,e;return t=new Dt({props:{location:r[8]}}),{c(){j(t.$$.fragment)},l(n){A(t.$$.fragment,n)},m(n,s){H(t,n,s),e=!0},p(n,s){const a={};s&2&&(a.location=n[8]),t.$set(a)},i(n){e||(x(t.$$.fragment,n),e=!0)},o(n){P(t.$$.fragment,n),e=!1},d(n){U(t,n)}}}function Ot(r){let t,e,n,s;const a=[Nt,zt,Vt],l=[];function i(o,c){return o[0]?0:o[1].length===0?1:2}return e=i(r),n=l[e]=a[e](r),{c(){t=v("div"),n.c(),this.h()},l(o){t=$(o,"DIV",{class:!0});var c=I(t);n.l(c),c.forEach(g),this.h()},h(){b(t,"class","tile-list")},m(o,c){C(o,t,c),l[e].m(t,null),s=!0},p(o,[c]){let u=e;e=i(o),e===u?l[e].p(o,c):(mt(),P(l[u],1,1,()=>{l[u]=null}),gt(),n=l[e],n?n.p(o,c):(n=l[e]=a[e](o),n.c()),x(n,1),n.m(t,null))},i(o){s||(x(n),s=!0)},o(o){P(n),s=!1},d(o){o&&g(t),l[e].d()}}}function Bt(r,t,e){let n,s,a;tt(r,wt,f=>e(3,s=f)),tt(r,_t,f=>e(4,a=f));let l=[],i=!0;Y(async()=>{try{e(2,l=(await a).locations)}catch(f){console.error(f)}finally{e(0,i=!1)}});function o(f){let d=[];for(const h of f)u(h)&&c(h)&&d.push(h);return d}function c(f){return s.filters.length>0?Object.keys(f.tags).some(d=>s.filters.includes(d)):!0}function u(f){return s.search!=""?f.name.toLocaleLowerCase().startsWith(s.search.toLocaleLowerCase()):!0}return r.$$.update=()=>{r.$$.dirty&12&&e(1,n=s?o(l):[])},[i,n,l,s]}class jt extends O{constructor(t){super(),B(this,t,Bt,Ot,N,{})}}function At(r){let t,e,n,s,a,l,i;return{c(){t=v("div"),e=v("input"),n=T(),s=v("img"),this.h()},l(o){t=$(o,"DIV",{class:!0});var c=I(t);e=$(c,"INPUT",{placeholder:!0,class:!0}),n=M(c),s=$(c,"IMG",{src:!0,alt:!0,class:!0}),c.forEach(g),this.h()},h(){b(e,"placeholder","Search"),b(e,"class","search"),ht(s.src,a="/filter-solid.svg")||b(s,"src",a),b(s,"alt","filter"),b(s,"class","filter"),b(t,"class","list-header")},m(o,c){C(o,t,c),m(t,e),ot(e,r[0].search),m(t,n),m(t,s),l||(i=[z(e,"input",r[2]),z(e,"input",r[1])],l=!0)},p(o,[c]){c&1&&e.value!==o[0].search&&ot(e,o[0].search)},i:w,o:w,d(o){o&&g(t),l=!1,et(i)}}}function Ht(r,t,e){let n={search:"",filters:[]};function s(){yt.set(n)}function a(){n.search=this.value,e(0,n)}return r.$$.update=()=>{r.$$.dirty&1&&(n.search,s())},[n,s,a]}class Ut extends O{constructor(t){super(),B(this,t,Ht,At,N,{})}}function qt(r){let t,e,n='<div class="handle"></div>',s,a,l,i,o,c,u,f;return l=new Ut({}),o=new jt({}),{c(){t=v("div"),e=v("div"),e.innerHTML=n,s=T(),a=v("div"),j(l.$$.fragment),i=T(),j(o.$$.fragment),this.h()},l(d){t=$(d,"DIV",{class:!0,style:!0});var h=I(t);e=$(h,"DIV",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-1k3rr5b"&&(e.innerHTML=n),s=M(h),a=$(h,"DIV",{class:!0});var p=I(a);A(l.$$.fragment,p),i=M(p),A(o.$$.fragment,p),p.forEach(g),h.forEach(g),this.h()},h(){b(e,"class","grip"),b(a,"class","location-modal-content"),b(t,"class","location-modal"),b(t,"style",r[1])},m(d,h){C(d,t,h),m(t,e),r[5](e),m(t,s),m(t,a),H(l,a,null),m(a,i),H(o,a,null),c=!0,u||(f=[z(e,"mousedown",rt(r[2])),z(e,"touchstart",rt(r[2]))],u=!0)},p(d,[h]){(!c||h&2)&&b(t,"style",d[1])},i(d){c||(x(l.$$.fragment,d),x(o.$$.fragment,d),c=!0)},o(d){P(l.$$.fragment,d),P(o.$$.fragment,d),c=!1},d(d){d&&g(t),r[5](null),U(l),U(o),u=!1,et(f)}}}function Gt(r,t,e){let n,s=0,a,l,i=!1,o=0;function c(p){i=!0;const _=p instanceof TouchEvent?p.touches[0].clientY:p.clientY,E=l.getBoundingClientRect();o=_-E.top}function u(p){if(i){const _=p instanceof TouchEvent?p.touches[0].clientY:p.clientY;e(3,s=Math.min(_-a-o,0))}}function f(){i=!1}function d(){if(l){const p=l.getBoundingClientRect();e(4,a=p.top)}}Y(()=>{d(),window.addEventListener("mousemove",u),window.addEventListener("mouseup",f),window.addEventListener("touchmove",u),window.addEventListener("touchend",f)});function h(p){bt[p?"unshift":"push"](()=>{l=p,e(0,l)})}return r.$$.update=()=>{r.$$.dirty&24&&e(1,n=a?`top: ${Math.max(a+s,0)}px`:"")},[l,n,c,s,a,h]}class Rt extends O{constructor(t){super(),B(this,t,Gt,qt,N,{})}}function Wt(r){let t,e="Sign in with Google",n,s;return{c(){t=v("button"),t.textContent=e,this.h()},l(a){t=$(a,"BUTTON",{class:!0,"data-svelte-h":!0}),D(t)!=="svelte-1dn4jlq"&&(t.textContent=e),this.h()},h(){b(t,"class","svelte-1lgzup3")},m(a,l){C(a,t,l),n||(s=z(t,"click",r[4]),n=!0)},p:w,d(a){a&&g(t),n=!1,s()}}}function Yt(r){let t,e,n,s=r[0].displayName+"",a,l,i,o,c="Sign Out",u,f;return{c(){t=v("div"),e=v("p"),n=q("Welcome, "),a=q(s),l=q("!"),i=T(),o=v("button"),o.textContent=c,this.h()},l(d){t=$(d,"DIV",{});var h=I(t);e=$(h,"P",{});var p=I(e);n=G(p,"Welcome, "),a=G(p,s),l=G(p,"!"),p.forEach(g),i=M(h),o=$(h,"BUTTON",{class:!0,"data-svelte-h":!0}),D(o)!=="svelte-1vz90ia"&&(o.textContent=c),h.forEach(g),this.h()},h(){b(o,"class","svelte-1lgzup3")},m(d,h){C(d,t,h),m(t,e),m(e,n),m(e,a),m(e,l),m(t,i),m(t,o),u||(f=z(o,"click",r[3]),u=!0)},p(d,h){h&1&&s!==(s=d[0].displayName+"")&&F(a,s)},d(d){d&&g(t),u=!1,f()}}}function dt(r){let t,e,n,s="Sign In",a,l,i="Sign in with Google",o,c,u="Cancel",f,d;return{c(){t=v("div"),e=v("div"),n=v("h2"),n.textContent=s,a=T(),l=v("button"),l.textContent=i,o=T(),c=v("button"),c.textContent=u,this.h()},l(h){t=$(h,"DIV",{class:!0});var p=I(t);e=$(p,"DIV",{class:!0});var _=I(e);n=$(_,"H2",{"data-svelte-h":!0}),D(n)!=="svelte-1f1zcva"&&(n.textContent=s),a=M(_),l=$(_,"BUTTON",{class:!0,"data-svelte-h":!0}),D(l)!=="svelte-17km2l0"&&(l.textContent=i),o=M(_),c=$(_,"BUTTON",{class:!0,"data-svelte-h":!0}),D(c)!=="svelte-1yoi7ua"&&(c.textContent=u),_.forEach(g),p.forEach(g),this.h()},h(){b(l,"class","svelte-1lgzup3"),b(c,"class","svelte-1lgzup3"),b(e,"class","popup-content svelte-1lgzup3"),b(t,"class","popup svelte-1lgzup3")},m(h,p){C(h,t,p),m(t,e),m(e,n),m(e,a),m(e,l),m(e,o),m(e,c),f||(d=[z(l,"click",r[2]),z(c,"click",r[5])],f=!0)},p:w,d(h){h&&g(t),f=!1,et(d)}}}function Ft(r){let t,e;function n(i,o){return i[0]?Yt:Wt}let s=n(r),a=s(r),l=r[1]&&dt(r);return{c(){a.c(),t=T(),l&&l.c(),e=J()},l(i){a.l(i),t=M(i),l&&l.l(i),e=J()},m(i,o){a.m(i,o),C(i,t,o),l&&l.m(i,o),C(i,e,o)},p(i,[o]){s===(s=n(i))&&a?a.p(i,o):(a.d(1),a=s(i),a&&(a.c(),a.m(t.parentNode,t))),i[1]?l?l.p(i,o):(l=dt(i),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:w,o:w,d(i){i&&(g(t),g(e)),a.d(i),l&&l.d(i)}}}function Jt(r,t,e){let n=null,s=!1;const a=async()=>{try{const c=await Tt(X,$t);e(0,n=c.user),console.log("User Info:",n),e(1,s=!1)}catch(c){console.error("Error during sign-in:",c.message)}},l=async()=>{await Mt(X),e(0,n=null),console.log("User signed out")};return Y(()=>{const c=Et(X,u=>{e(0,n=u),console.log("Auth state changed, current user:",n)});return()=>c()}),[n,s,a,l,()=>e(1,s=!0),()=>e(1,s=!1)]}class Zt extends O{constructor(t){super(),B(this,t,Jt,Ft,N,{})}}function Kt(r){navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>Qt(t,r)):console.warn("Geolocation Not Enabled")}function Qt(r,t){t([r.coords.latitude,r.coords.longitude])}function Xt(r){Y(()=>{Kt(r)})}function te(r){return{lat:r[0],lng:r[1]}}function ee(r){return{lat:r.location.lat,lng:r.location.long}}function ne(){(r=>{var t,e,n,s="The Google Maps JavaScript API",a="google",l="importLibrary",i="__ib__",o=document,c=window;c=c[a]||(c[a]={});var u=c.maps||(c.maps={}),f=new Set,d=new URLSearchParams,h=()=>t||(t=new Promise(async(p,_)=>{var E;await(e=o.createElement("script")),d.set("libraries",[...f]+"");for(n in r)d.set(n.replace(/[A-Z]/g,V=>"_"+V[0].toLowerCase()),r[n]);d.set("callback",a+".maps."+i),e.src=`https://maps.${a}apis.com/maps/api/js?`+d,u[i]=p,e.onerror=()=>t=_(Error(s+" could not load.")),e.nonce=((E=o.querySelector("script[nonce]"))==null?void 0:E.nonce)||"",o.head.append(e)}));u[l]?console.warn(s+" only loads once. Ignoring:",r):u[l]=(p,..._)=>f.add(p)&&h().then(()=>u[l](p,..._))})({key:"AIzaSyDBBIAIrl0DViTk_pM6Ink6q3GTEYlTbhw",v:"weekly"})}function le(r){let t,e='<div id="map" class="svelte-9hbiut"></div>';return{c(){t=v("div"),t.innerHTML=e,this.h()},l(n){t=$(n,"DIV",{style:!0,class:!0,"data-svelte-h":!0}),D(t)!=="svelte-1wuvrps"&&(t.innerHTML=e),this.h()},h(){kt(t,"flex-grow","1"),b(t,"class","svelte-9hbiut")},m(n,s){C(n,t,s)},p:w,i:w,o:w,d(n){n&&g(t)}}}function se(r){return console.log(JSON.stringify(r)),`
			<h2 style="color:black">Is this location ok?</h2>
			<a href="/create?lat=${r.lat()}&lng=${r.lng()}">Create a new study location</a>
		`}function oe(r,t,e){let n;tt(r,_t,c=>e(3,n=c));let{selecting:s=!0}=t,a;Xt(i),Y(()=>{ne()});let l;async function i(c){const u=te(c),{Map:f}=await google.maps.importLibrary("maps");await google.maps.importLibrary("marker");const d=new google.maps.InfoWindow({maxWidth:"300px"});l=new f(document.getElementById("map"),{zoom:15,center:u,mapId:"map_id"}),s&&l.addListener("click",_=>{h(l,_.latLng)});function h(_,E){a&&(a.map=null),a=new google.maps.marker.AdvancedMarkerElement({position:E,map:_}),_.setCenter(E),_.setZoom(18),d.close(),d.setContent(se(E)),d.open(a.map,a)}const{locations:p}=await n;for(const _ of p){const E=ee(_),V=new google.maps.marker.AdvancedMarkerElement({map:l,position:E,title:_.name});V.addListener("click",()=>{d.close(),d.setContent(o(_)),d.open(V.map,V)})}}function o(c){return`
		<div style="color: black">
			<a style="color: inherit; font-size: 30px" href="/locations?id=${c.id}">${c.name}</a>
			<p style="color: inherit">${Ct(c.tags)}</p>
			<p style="color: inherit">${c.stars}/5 starts</p>
		</div>
		`}return r.$$set=c=>{"selecting"in c&&e(0,s=c.selecting)},[s]}class re extends O{constructor(t){super(),B(this,t,oe,le,N,{selecting:0})}}function ae(r){let t,e='<h1>Study Scout</h1> <img src="/user-solid.svg" alt="profile" class="profile-icon"/>';return{c(){t=v("div"),t.innerHTML=e,this.h()},l(n){t=$(n,"DIV",{class:!0,"data-svelte-h":!0}),D(t)!=="svelte-111bbm0"&&(t.innerHTML=e),this.h()},h(){b(t,"class","header")},m(n,s){C(n,t,s)},p:w,i:w,o:w,d(n){n&&g(t)}}}class ie extends O{constructor(t){super(),B(this,t,null,ae,N,{})}}function ce(r){let t,e,n,s,a,l,i,o,c;return e=new ie({}),s=new re({}),l=new Rt({}),o=new Zt({}),{c(){t=v("div"),j(e.$$.fragment),n=T(),j(s.$$.fragment),a=T(),j(l.$$.fragment),i=T(),j(o.$$.fragment),this.h()},l(u){t=$(u,"DIV",{class:!0});var f=I(t);A(e.$$.fragment,f),n=M(f),A(s.$$.fragment,f),f.forEach(g),a=M(u),A(l.$$.fragment,u),i=M(u),A(o.$$.fragment,u),this.h()},h(){b(t,"class","main-content")},m(u,f){C(u,t,f),H(e,t,null),m(t,n),H(s,t,null),C(u,a,f),H(l,u,f),C(u,i,f),H(o,u,f),c=!0},p:w,i(u){c||(x(e.$$.fragment,u),x(s.$$.fragment,u),x(l.$$.fragment,u),x(o.$$.fragment,u),c=!0)},o(u){P(e.$$.fragment,u),P(s.$$.fragment,u),P(l.$$.fragment,u),P(o.$$.fragment,u),c=!1},d(u){u&&(g(t),g(a),g(i)),U(e),U(s),U(l,u),U(o,u)}}}function ue(r,t,e){let{data:n}=t;return Lt.set(n),r.$$set=s=>{"data"in s&&e(0,n=s.data)},[n]}class be extends O{constructor(t){super(),B(this,t,ue,ce,N,{data:0})}}export{be as component,$e as universal};

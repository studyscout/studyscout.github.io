import{j as kt,e as G,o as wt,s as yt,k as tt,p as Ct,l as Lt}from"../chunks/firestore._fNhU_D6.js";import{s as O,n as C,A as _t,b as et,o as Z,r as lt,e as It}from"../chunks/scheduler.CXGIGFVi.js";import{S as z,i as B,e as v,f as R,c as $,h as T,j as W,d as m,n as b,b as I,l as g,m as F,s as S,k as N,q as nt,z as P,t as E,r as st,p as rt,a as x,A as vt,v as A,w as j,x as H,y as U,o as J,g as V,B as ct,C as ut}from"../chunks/index.DTJa000i.js";/* empty css                       */import{f as Tt,l as $t,c as Et,d as Mt,g as xt}from"../chunks/taglist.BOJKkzxF.js";import{g as St}from"../chunks/entry.Co0jFhVr.js";/* empty css                         */import{u as Nt}from"../chunks/useLocation.wyeUizUf.js";const Dt=async()=>({locations:await kt()}),we=Object.freeze(Object.defineProperty({__proto__:null,load:Dt},Symbol.toStringTag,{value:"Module"}));function Vt(o){let t,e;return{c(){t=v("button"),e=R(o[0]),this.h()},l(n){t=$(n,"BUTTON",{class:!0});var l=T(t);e=W(l,o[0]),l.forEach(m),this.h()},h(){b(t,"class","tag")},m(n,l){I(n,t,l),g(t,e)},p(n,[l]){l&1&&F(e,n[0])},i:C,o:C,d(n){n&&m(t)}}}function Pt(o,t,e){let{tagName:n}=t;return o.$$set=l=>{"tagName"in l&&e(0,n=l.tagName)},[n]}class Ot extends z{constructor(t){super(),B(this,t,Pt,Vt,O,{tagName:0})}}function ft(o,t,e){const n=o.slice();return n[2]=t[e][0],n[3]=t[e][1],n}function dt(o){let t,e;return t=new Ot({props:{tagName:ht(o[2])}}),{c(){A(t.$$.fragment)},l(n){j(t.$$.fragment,n)},m(n,l){H(t,n,l),e=!0},p(n,l){const a={};l&1&&(a.tagName=ht(n[2])),t.$set(a)},i(n){e||(E(t.$$.fragment,n),e=!0)},o(n){x(t.$$.fragment,n),e=!1},d(n){U(t,n)}}}function zt(o){let t,e,n,l,a,s,i=o[0].name+"",r,c,u,f,d,h,p=o[0].stars+"",_,M,D,K,ot,q=G(Object.entries(o[0].tags)),y=[];for(let w=0;w<q.length;w+=1)y[w]=dt(ft(o,q,w));const bt=w=>x(y[w],1,1,()=>{y[w]=null});return{c(){t=v("div"),e=v("img"),l=S(),a=v("div"),s=v("h3"),r=R(i),c=S(),u=v("div"),f=v("div");for(let w=0;w<y.length;w+=1)y[w].c();d=S(),h=v("p"),_=R(p),M=R(" / 5"),this.h()},l(w){t=$(w,"DIV",{class:!0});var L=T(t);e=$(L,"IMG",{src:!0,height:!0,width:!0,alt:!0}),l=N(L),a=$(L,"DIV",{class:!0});var k=T(a);s=$(k,"H3",{});var Y=T(s);r=W(Y,i),Y.forEach(m),c=N(k),u=$(k,"DIV",{});var at=T(u);f=$(at,"DIV",{class:!0,style:!0});var it=T(f);for(let X=0;X<y.length;X+=1)y[X].l(it);it.forEach(m),at.forEach(m),d=N(k),h=$(k,"P",{});var Q=T(h);_=W(Q,p),M=W(Q," / 5"),Q.forEach(m),k.forEach(m),L.forEach(m),this.h()},h(){_t(e.src,n="https://placecats.com/neo/100/100")||b(e,"src",n),b(e,"height","100"),b(e,"width","100"),b(e,"alt","img"),b(f,"class","tags"),nt(f,"margin-left","-12px"),nt(f,"margin-right","-12px"),b(a,"class","tile-content"),b(t,"class","tile")},m(w,L){I(w,t,L),g(t,e),g(t,l),g(t,a),g(a,s),g(s,r),g(a,c),g(a,u),g(u,f);for(let k=0;k<y.length;k+=1)y[k]&&y[k].m(f,null);g(a,d),g(a,h),g(h,_),g(h,M),D=!0,K||(ot=P(t,"click",o[1]),K=!0)},p(w,[L]){if((!D||L&1)&&i!==(i=w[0].name+"")&&F(r,i),L&1){q=G(Object.entries(w[0].tags));let k;for(k=0;k<q.length;k+=1){const Y=ft(w,q,k);y[k]?(y[k].p(Y,L),E(y[k],1)):(y[k]=dt(Y),y[k].c(),E(y[k],1),y[k].m(f,null))}for(st(),k=q.length;k<y.length;k+=1)bt(k);rt()}(!D||L&1)&&p!==(p=w[0].stars+"")&&F(_,p)},i(w){if(!D){for(let L=0;L<q.length;L+=1)E(y[L]);D=!0}},o(w){y=y.filter(Boolean);for(let L=0;L<y.length;L+=1)x(y[L]);D=!1},d(w){w&&m(t),vt(y,w),K=!1,ot()}}}function ht(o){const t=o.split("_");let e="";for(let n of t)e+=n.charAt(0).toUpperCase()+n.slice(1)+" ";return e.slice(0,e.length-1)}function Bt(o,t,e){let{location:n}=t;function l(){St(`/locations?id=${n.id}`)}return o.$$set=a=>{"location"in a&&e(0,n=a.location)},[n,l]}class At extends z{constructor(t){super(),B(this,t,Bt,zt,O,{location:0})}}function pt(o,t,e){const n=o.slice();return n[8]=t[e],n}function jt(o){let t,e,n=G(o[1]),l=[];for(let s=0;s<n.length;s+=1)l[s]=mt(pt(o,n,s));const a=s=>x(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=J()},l(s){for(let i=0;i<l.length;i+=1)l[i].l(s);t=J()},m(s,i){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(s,i);I(s,t,i),e=!0},p(s,i){if(i&2){n=G(s[1]);let r;for(r=0;r<n.length;r+=1){const c=pt(s,n,r);l[r]?(l[r].p(c,i),E(l[r],1)):(l[r]=mt(c),l[r].c(),E(l[r],1),l[r].m(t.parentNode,t))}for(st(),r=n.length;r<l.length;r+=1)a(r);rt()}},i(s){if(!e){for(let i=0;i<n.length;i+=1)E(l[i]);e=!0}},o(s){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)x(l[i]);e=!1},d(s){s&&m(t),vt(l,s)}}}function Ht(o){let t,e="No locations found.";return{c(){t=v("p"),t.textContent=e},l(n){t=$(n,"P",{"data-svelte-h":!0}),V(t)!=="svelte-jyefyr"&&(t.textContent=e)},m(n,l){I(n,t,l)},p:C,i:C,o:C,d(n){n&&m(t)}}}function Ut(o){let t,e="Loading...";return{c(){t=v("p"),t.textContent=e},l(n){t=$(n,"P",{"data-svelte-h":!0}),V(t)!=="svelte-qdsr2u"&&(t.textContent=e)},m(n,l){I(n,t,l)},p:C,i:C,o:C,d(n){n&&m(t)}}}function mt(o){let t,e;return t=new At({props:{location:o[8]}}),{c(){A(t.$$.fragment)},l(n){j(t.$$.fragment,n)},m(n,l){H(t,n,l),e=!0},p(n,l){const a={};l&2&&(a.location=n[8]),t.$set(a)},i(n){e||(E(t.$$.fragment,n),e=!0)},o(n){x(t.$$.fragment,n),e=!1},d(n){U(t,n)}}}function qt(o){let t,e,n,l;const a=[Ut,Ht,jt],s=[];function i(r,c){return r[0]?0:r[1].length===0?1:2}return e=i(o),n=s[e]=a[e](o),{c(){t=v("div"),n.c(),this.h()},l(r){t=$(r,"DIV",{class:!0});var c=T(t);n.l(c),c.forEach(m),this.h()},h(){b(t,"class","tile-list")},m(r,c){I(r,t,c),s[e].m(t,null),l=!0},p(r,[c]){let u=e;e=i(r),e===u?s[e].p(r,c):(st(),x(s[u],1,1,()=>{s[u]=null}),rt(),n=s[e],n?n.p(r,c):(n=s[e]=a[e](r),n.c()),E(n,1),n.m(t,null))},i(r){l||(E(n),l=!0)},o(r){x(n),l=!1},d(r){r&&m(t),s[e].d()}}}function Rt(o,t,e){let n,l,a;et(o,Tt,f=>e(3,l=f)),et(o,$t,f=>e(4,a=f));let s=[],i=!0;Z(async()=>{try{e(2,s=(await a).locations)}catch(f){console.error(f)}finally{e(0,i=!1)}});function r(f){let d=[];for(const h of f)u(h)&&c(h)&&d.push(h);return d}function c(f){return l.filters.length>0?Object.keys(f.tags).some(d=>l.filters.includes(d)):!0}function u(f){return l.search!=""?f.name.toLocaleLowerCase().startsWith(l.search.toLocaleLowerCase()):!0}return o.$$.update=()=>{o.$$.dirty&12&&e(1,n=l?r(s):[])},[i,n,s,l]}class Wt extends z{constructor(t){super(),B(this,t,Rt,qt,O,{})}}function Yt(o){let t,e,n,l,a,s,i;return{c(){t=v("div"),e=v("input"),n=S(),l=v("img"),this.h()},l(r){t=$(r,"DIV",{class:!0});var c=T(t);e=$(c,"INPUT",{placeholder:!0,class:!0}),n=N(c),l=$(c,"IMG",{src:!0,alt:!0,class:!0}),c.forEach(m),this.h()},h(){b(e,"placeholder","Search"),b(e,"class","search"),_t(l.src,a="/filter-solid.svg")||b(l,"src",a),b(l,"alt","filter"),b(l,"class","filter"),b(t,"class","list-header")},m(r,c){I(r,t,c),g(t,e),ct(e,o[0].search),g(t,n),g(t,l),s||(i=[P(e,"input",o[2]),P(e,"input",o[1])],s=!0)},p(r,[c]){c&1&&e.value!==r[0].search&&ct(e,r[0].search)},i:C,o:C,d(r){r&&m(t),s=!1,lt(i)}}}function Gt(o,t,e){let n={search:"",filters:[]};function l(){Et.set(n)}function a(){n.search=this.value,e(0,n)}return o.$$.update=()=>{o.$$.dirty&1&&(n.search,l())},[n,l,a]}class Ft extends z{constructor(t){super(),B(this,t,Gt,Yt,O,{})}}function Jt(o){let t,e,n='<div class="handle"></div>',l,a,s,i,r,c,u,f;return s=new Ft({}),r=new Wt({}),{c(){t=v("div"),e=v("div"),e.innerHTML=n,l=S(),a=v("div"),A(s.$$.fragment),i=S(),A(r.$$.fragment),this.h()},l(d){t=$(d,"DIV",{class:!0,style:!0});var h=T(t);e=$(h,"DIV",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-1k3rr5b"&&(e.innerHTML=n),l=N(h),a=$(h,"DIV",{class:!0});var p=T(a);j(s.$$.fragment,p),i=N(p),j(r.$$.fragment,p),p.forEach(m),h.forEach(m),this.h()},h(){b(e,"class","grip"),b(a,"class","location-modal-content"),b(t,"class","location-modal"),b(t,"style",o[1])},m(d,h){I(d,t,h),g(t,e),o[5](e),g(t,l),g(t,a),H(s,a,null),g(a,i),H(r,a,null),c=!0,u||(f=[P(e,"mousedown",ut(o[2])),P(e,"touchstart",ut(o[2]))],u=!0)},p(d,[h]){(!c||h&2)&&b(t,"style",d[1])},i(d){c||(E(s.$$.fragment,d),E(r.$$.fragment,d),c=!0)},o(d){x(s.$$.fragment,d),x(r.$$.fragment,d),c=!1},d(d){d&&m(t),o[5](null),U(s),U(r),u=!1,lt(f)}}}function Zt(o,t,e){let n,l=0,a,s,i=!1,r=0;function c(p){i=!0;const _=p instanceof TouchEvent?p.touches[0].clientY:p.clientY,M=s.getBoundingClientRect();r=_-M.top}function u(p){if(i){const _=p instanceof TouchEvent?p.touches[0].clientY:p.clientY;e(3,l=Math.min(_-a-r,0))}}function f(){i=!1}function d(){if(s){const p=s.getBoundingClientRect();e(4,a=p.top)}}Z(()=>{d(),window.addEventListener("mousemove",u),window.addEventListener("mouseup",f),window.addEventListener("touchmove",u),window.addEventListener("touchend",f)});function h(p){It[p?"unshift":"push"](()=>{s=p,e(0,s)})}return o.$$.update=()=>{o.$$.dirty&24&&e(1,n=a?`top: ${Math.max(a+l,0)}px`:"")},[s,n,c,l,a,h]}class Kt extends z{constructor(t){super(),B(this,t,Zt,Jt,O,{})}}function Qt(o){let t,e="Sign in with Google",n,l;return{c(){t=v("button"),t.textContent=e,this.h()},l(a){t=$(a,"BUTTON",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-1dn4jlq"&&(t.textContent=e),this.h()},h(){b(t,"class","svelte-1lgzup3")},m(a,s){I(a,t,s),n||(l=P(t,"click",o[4]),n=!0)},p:C,d(a){a&&m(t),n=!1,l()}}}function Xt(o){let t,e,n,l=o[0].displayName+"",a,s,i,r,c="Sign Out",u,f;return{c(){t=v("div"),e=v("p"),n=R("Welcome, "),a=R(l),s=R("!"),i=S(),r=v("button"),r.textContent=c,this.h()},l(d){t=$(d,"DIV",{});var h=T(t);e=$(h,"P",{});var p=T(e);n=W(p,"Welcome, "),a=W(p,l),s=W(p,"!"),p.forEach(m),i=N(h),r=$(h,"BUTTON",{class:!0,"data-svelte-h":!0}),V(r)!=="svelte-1vz90ia"&&(r.textContent=c),h.forEach(m),this.h()},h(){b(r,"class","svelte-1lgzup3")},m(d,h){I(d,t,h),g(t,e),g(e,n),g(e,a),g(e,s),g(t,i),g(t,r),u||(f=P(r,"click",o[3]),u=!0)},p(d,h){h&1&&l!==(l=d[0].displayName+"")&&F(a,l)},d(d){d&&m(t),u=!1,f()}}}function gt(o){let t,e,n,l="Sign In",a,s,i="Sign in with Google",r,c,u="Cancel",f,d;return{c(){t=v("div"),e=v("div"),n=v("h2"),n.textContent=l,a=S(),s=v("button"),s.textContent=i,r=S(),c=v("button"),c.textContent=u,this.h()},l(h){t=$(h,"DIV",{class:!0});var p=T(t);e=$(p,"DIV",{class:!0});var _=T(e);n=$(_,"H2",{"data-svelte-h":!0}),V(n)!=="svelte-1f1zcva"&&(n.textContent=l),a=N(_),s=$(_,"BUTTON",{class:!0,"data-svelte-h":!0}),V(s)!=="svelte-17km2l0"&&(s.textContent=i),r=N(_),c=$(_,"BUTTON",{class:!0,"data-svelte-h":!0}),V(c)!=="svelte-1yoi7ua"&&(c.textContent=u),_.forEach(m),p.forEach(m),this.h()},h(){b(s,"class","svelte-1lgzup3"),b(c,"class","svelte-1lgzup3"),b(e,"class","popup-content svelte-1lgzup3"),b(t,"class","popup svelte-1lgzup3")},m(h,p){I(h,t,p),g(t,e),g(e,n),g(e,a),g(e,s),g(e,r),g(e,c),f||(d=[P(s,"click",o[2]),P(c,"click",o[5])],f=!0)},p:C,d(h){h&&m(t),f=!1,lt(d)}}}function te(o){let t,e;function n(i,r){return i[0]?Xt:Qt}let l=n(o),a=l(o),s=o[1]&&gt(o);return{c(){a.c(),t=S(),s&&s.c(),e=J()},l(i){a.l(i),t=N(i),s&&s.l(i),e=J()},m(i,r){a.m(i,r),I(i,t,r),s&&s.m(i,r),I(i,e,r)},p(i,[r]){l===(l=n(i))&&a?a.p(i,r):(a.d(1),a=l(i),a&&(a.c(),a.m(t.parentNode,t))),i[1]?s?s.p(i,r):(s=gt(i),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:C,o:C,d(i){i&&(m(t),m(e)),a.d(i),s&&s.d(i)}}}function ee(o,t,e){let n=null,l=!1;const a=async()=>{try{const c=await yt(tt,Ct);e(0,n=c.user),console.log("User Info:",n),e(1,l=!1)}catch(c){console.error("Error during sign-in:",c.message)}},s=async()=>{await Lt(tt),e(0,n=null),console.log("User signed out")};return Z(()=>{const c=wt(tt,u=>{e(0,n=u),console.log("Auth state changed, current user:",n)});return()=>c()}),[n,l,a,s,()=>e(1,l=!0),()=>e(1,l=!1)]}class ne extends z{constructor(t){super(),B(this,t,ee,te,O,{})}}function le(o){return{lat:o[0],lng:o[1]}}function se(o){return{lat:o.location.lat,lng:o.location.long}}function re(){(o=>{var t,e,n,l="The Google Maps JavaScript API",a="google",s="importLibrary",i="__ib__",r=document,c=window;c=c[a]||(c[a]={});var u=c.maps||(c.maps={}),f=new Set,d=new URLSearchParams,h=()=>t||(t=new Promise(async(p,_)=>{var M;await(e=r.createElement("script")),d.set("libraries",[...f]+"");for(n in o)d.set(n.replace(/[A-Z]/g,D=>"_"+D[0].toLowerCase()),o[n]);d.set("callback",a+".maps."+i),e.src=`https://maps.${a}apis.com/maps/api/js?`+d,u[i]=p,e.onerror=()=>t=_(Error(l+" could not load.")),e.nonce=((M=r.querySelector("script[nonce]"))==null?void 0:M.nonce)||"",r.head.append(e)}));u[s]?console.warn(l+" only loads once. Ignoring:",o):u[s]=(p,..._)=>f.add(p)&&h().then(()=>u[s](p,..._))})({key:"AIzaSyDBBIAIrl0DViTk_pM6Ink6q3GTEYlTbhw",v:"weekly"})}function oe(o){let t,e='<div id="map"></div>';return{c(){t=v("div"),t.innerHTML=e,this.h()},l(n){t=$(n,"DIV",{style:!0,"data-svelte-h":!0}),V(t)!=="svelte-1wuvrps"&&(t.innerHTML=e),this.h()},h(){nt(t,"flex-grow","1")},m(n,l){I(n,t,l)},p:C,i:C,o:C,d(n){n&&m(t)}}}function ae(o){return console.log(JSON.stringify(o)),`
			<h2 style="color: black">Is this location ok?</h2>
			<a href="/locations/create?lat=${o.lat()}&lng=${o.lng()}">Create a new study location</a>
		`}function ie(o,t,e){let n;et(o,$t,c=>e(3,n=c));let{selecting:l=!0}=t,a;Nt(i),Z(()=>{re()});let s;async function i(c){const u=le(c),{Map:f}=await google.maps.importLibrary("maps");await google.maps.importLibrary("marker");const d=new google.maps.InfoWindow({maxWidth:"300px"});s=new f(document.getElementById("map"),{zoom:15,center:u,mapId:"map_id"}),l&&s.addListener("click",_=>{h(s,_.latLng)});function h(_,M){a&&(a.map=null),a=new google.maps.marker.AdvancedMarkerElement({position:M,map:_}),_.setCenter(M),_.setZoom(18),d.close(),d.setContent(ae(M)),d.open(a.map,a)}const{locations:p}=await n;for(const _ of p){const M=se(_),D=new google.maps.marker.AdvancedMarkerElement({map:s,position:M,title:_.name});D.addListener("click",()=>{d.close(),d.setContent(r(_)),d.open(D.map,D)})}}function r(c){return`
		<div style="color: black">
			<a style="font-size: 30px" href='/locations?id=${c.id}'>${c.name}</a>
			<p style="color: black">${Mt(c.tags)}</p>
			<p style="color: black">${c.stars}/5 starts</p>
		</div>
		`}return o.$$set=c=>{"selecting"in c&&e(0,l=c.selecting)},[l]}class ce extends z{constructor(t){super(),B(this,t,ie,oe,O,{selecting:0})}}function ue(o){let t,e='<h1>Study Scout</h1> <img src="/user-solid.svg" alt="profile" class="profile-icon"/>';return{c(){t=v("div"),t.innerHTML=e,this.h()},l(n){t=$(n,"DIV",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-111bbm0"&&(t.innerHTML=e),this.h()},h(){b(t,"class","header")},m(n,l){I(n,t,l)},p:C,i:C,o:C,d(n){n&&m(t)}}}class fe extends z{constructor(t){super(),B(this,t,null,ue,O,{})}}function de(o){let t,e,n,l,a,s,i,r,c;return e=new fe({}),l=new ce({}),s=new Kt({}),r=new ne({}),{c(){t=v("div"),A(e.$$.fragment),n=S(),A(l.$$.fragment),a=S(),A(s.$$.fragment),i=S(),A(r.$$.fragment),this.h()},l(u){t=$(u,"DIV",{class:!0});var f=T(t);j(e.$$.fragment,f),n=N(f),j(l.$$.fragment,f),f.forEach(m),a=N(u),j(s.$$.fragment,u),i=N(u),j(r.$$.fragment,u),this.h()},h(){b(t,"class","main-content")},m(u,f){I(u,t,f),H(e,t,null),g(t,n),H(l,t,null),I(u,a,f),H(s,u,f),I(u,i,f),H(r,u,f),c=!0},p:C,i(u){c||(E(e.$$.fragment,u),E(l.$$.fragment,u),E(s.$$.fragment,u),E(r.$$.fragment,u),c=!0)},o(u){x(e.$$.fragment,u),x(l.$$.fragment,u),x(s.$$.fragment,u),x(r.$$.fragment,u),c=!1},d(u){u&&(m(t),m(a),m(i)),U(e),U(l),U(s,u),U(r,u)}}}function he(o,t,e){let{data:n}=t;return xt.set(n),o.$$set=l=>{"data"in l&&e(0,n=l.data)},[n]}class ye extends z{constructor(t){super(),B(this,t,he,de,O,{data:0})}}export{ye as component,we as universal};
